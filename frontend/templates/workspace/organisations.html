{% extends "workspace/base.html" %}

{% block title %}{{ organisation.name }} - Spacelogic{% endblock %}

{% block workspace_content %}
<div class="organisation-container">
    <div class="organisation-header">
        <div class="organisation-title">
            <div class="org-avatar">
                {{ organisation.name[0] | upper }}
            </div>
            <h1>{{ organisation.name }}</h1>
        </div>
    </div>

    <div class="tabs-container">
        <div class="tabs">
            <button class="tab-btn active" data-tab="members">Membres</button>
            <button class="tab-btn" data-tab="projects">Projets</button>
            <button class="tab-btn" data-tab="roles">Rôles</button>
        </div>

        <!-- Members Tab Content -->
        <div class="tab-content active" id="members-tab">
            <div class="tab-header">
                <h2>Membres de l'organisation</h2>
                <button class="btn btn-primary add-member-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Ajouter un membre
                </button>
            </div>

            {% if organisation.members %}
            <div class="members-table-container">
                <table class="members-table">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Prénom</th>
                            <th>Email</th>
                            <th>Rôle</th>
                            <th>Département</th>
                            <th>Emplacement</th>
                            <th>Inscrit le</th>
                            <th>Dernière activité</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for member in organisation.members %}
                        <tr>
                            <td>{{ member.last_name }}</td>
                            <td>{{ member.first_name }}</td>
                            <td>{{ member.email }}</td>
                            <td>
                                <span class="role-badge">{{ member.role|default('Membre') }}</span>
                            </td>
                            <td>{{ member.department|default('N/A') }}</td>
                            <td>{{ member.location|default('N/A') }}</td>
                            <td>{{ member.created_at.strftime('%d/%m/%Y') if member.created_at else 'N/A' }}</td>
                            <td>{{ member.last_active.strftime('%d/%m/%Y %H:%M') if member.last_active else 'N/A' }}</td>
                            <td>
                                <span class="status-badge {% if member.is_active %}active{% else %}inactive{% endif %}">
                                    {% if member.is_active %}Actif{% else %}Inactif{% endif %}
                                </span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn edit-btn" data-id="{{ member.id }}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                        </svg>
                                    </button>
                                    <button class="action-btn delete-btn" data-id="{{ member.id }}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="3 6 5 6 21 6"></polyline>
                                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="empty-state">
                <div class="empty-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <h2>Aucun membre</h2>
                <p>Cette organisation n'a pas encore de membres.</p>
                <button class="btn btn-primary add-member-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Ajouter un membre
                </button>
            </div>
            {% endif %}
        </div>

        <!-- Projects Tab Content -->
        <div class="tab-content" id="projects-tab">
            <div class="tab-header">
                <h2>Projets de l'organisation</h2>
                <button class="btn btn-primary create-project-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Nouveau projet
                </button>
            </div>

            {% if organisation.projects %}
            <div class="projects-grid">
                {% for project in organisation.projects %}
                <div class="project-card">
                    <div class="project-card-header">
                        <p class="project-number">No. {{ project.project_number }}</p>
                        <div class="project-actions">
                            <button class="project-action-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="1"></circle>
                                    <circle cx="19" cy="12" r="1"></circle>
                                    <circle cx="5" cy="12" r="1"></circle>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="project-card-content">
                        <div class="project-image-container">
                            <img src="/static/images/project-placeholder.png" alt="Project Image" class="project-image">
                        </div>
                        <h3 class="project-title">{{ project.name }}</h3>
                        <p class="project-description">{{ project.description }}</p>
                    </div>
                    <div class="project-card-footer">
                        <div class="project-name">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                            </svg>
                            <span>{{ project.project_number }}</span>
                        </div>
                        <span class="project-status {{ project.status|lower }}">{{ project.status }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <div class="empty-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
                <h2>Aucun projet</h2>
                <p>Cette organisation n'a pas encore de projets.</p>
                <button class="btn btn-primary create-project-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Créer un nouveau projet
                </button>
            </div>
            {% endif %}
        </div>

        <!-- Roles Tab Content -->
        <div class="tab-content" id="roles-tab">
            <div class="tab-header">
                <h2>Rôles de l'organisation</h2>
                <button class="btn btn-primary add-role-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Ajouter un rôle
                </button>
            </div>

            {% if organisation.roles %}
            <div class="roles-container">
                {% for role in organisation.roles %}
                <div class="role-card">
                    <div class="role-header">
                        <h3>{{ role.name }}</h3>
                        <div class="role-actions">
                            <button class="role-action-btn edit-role" data-id="{{ role.id }}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="role-action-btn delete-role" data-id="{{ role.id }}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="role-content">
                        <p>{{ role.description }}</p>
                    </div>
                    <div class="role-footer">
                        <span class="role-date">Créé le {{ role.created_at.strftime('%d/%m/%Y') if role.created_at else 'N/A' }}</span>
                        <button class="btn btn-outline-primary assign-role-btn" data-id="{{ role.id }}">
                            Assigner
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <div class="empty-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <h2>Aucun rôle</h2>
                <p>Cette organisation n'a pas encore défini de rôles personnalisés.</p>
                <button class="btn btn-primary add-role-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Ajouter un rôle
                </button>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
{{ super() }}
<style>
    /* Organization Header Styles */
    .organisation-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
    }

    .organisation-title {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .org-avatar {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        background-color: #3498db;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: bold;
    }

    .organisation-title h1 {
        margin: 0;
        font-size: 1.8rem;
        color: #2d3748;
    }

    /* Tabs Styles */
    .tabs-container {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        border: 1px solid #e2e8f0;
        overflow: hidden;
    }

    .tabs {
        display: flex;
        border-bottom: 1px solid #e2e8f0;
        background-color: #f8fafc;
    }

    .tab-btn {
        padding: 15px 25px;
        background: none;
        border: none;
        font-size: 1rem;
        font-weight: 500;
        color: #718096;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
    }

    .tab-btn:hover {
        color: #3498db;
    }

    .tab-btn.active {
        color: #3498db;
    }

    .tab-btn.active::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #3498db;
    }

    .tab-content {
        display: none;
        padding: 25px;
    }

    .tab-content.active {
        display: block;
    }

    .tab-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .tab-header h2 {
        margin: 0;
        font-size: 1.4rem;
        color: #2d3748;
    }

    /* Button Styles */
    .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
    }

    .btn-primary {
        background-color: #3498db;
        color: white;
    }

    .btn-primary:hover {
        background-color: #2980b9;
    }

    .btn-outline-primary {
        background-color: transparent;
        color: #3498db;
        border: 1px solid #3498db;
    }

    .btn-outline-primary:hover {
        background-color: #ebf8ff;
    }

    /* Members Table Styles */
    .members-table-container {
        overflow-x: auto;
    }

    .members-table {
        width: 100%;
        border-collapse: collapse;
    }

    .members-table th,
    .members-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #e2e8f0;
    }

    .members-table th {
        background-color: #f8fafc;
        font-weight: 600;
        color: #4a5568;
    }

    .members-table tbody tr:hover {
        background-color: #f8fafc;
    }

    .role-badge {
        display: inline-block;
        padding: 4px 8px;
        background-color: #ebf8ff;
        color: #3498db;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 500;
    }

    .status-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 500;
    }

    .status-badge.active {
        background-color: #d1f9d1;
        color: #237923;
    }

    .status-badge.inactive {
        background-color: #fed7d7;
        color: #c53030;
    }

    .action-buttons {
        display: flex;
        gap: 5px;
    }

    .action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 5px;
        border: none;
        background: none;
        color: #a0aec0;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .action-btn:hover {
        background-color: #f7fafc;
        color: #4a5568;
    }

    .edit-btn:hover {
        color: #3498db;
    }

    .delete-btn:hover {
        color: #e53e3e;
    }

    /* Projects Grid Styles */
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
    }

    .project-card {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        border: 1px solid #e2e8f0;
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        display: flex;
        flex-direction: column;
    }

    .project-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.05);
    }

    .project-card-header {
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #e2e8f0;
    }

    .project-number {
        font-size: 0.8rem;
        color: #718096;
        margin: 0;
    }

    .project-action-btn {
        background: none;
        border: none;
        cursor: pointer;
        color: #a0aec0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 5px;
        border-radius: 50%;
        transition: background-color 0.2s ease;
    }

    .project-action-btn:hover {
        background-color: #f7fafc;
        color: #4a5568;
    }

    .project-card-content {
        padding: 15px;
        flex: 1;
    }

    .project-image-container {
        display: flex;
        justify-content: center;
        margin-bottom: 15px;
    }

    .project-image {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 8px;
    }

    .project-title {
        margin: 0 0 10px 0;
        font-size: 1.1rem;
        color: #2d3748;
    }

    .project-description {
        color: #4a5568;
        font-size: 0.9rem;
        margin: 0;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .project-card-footer {
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top: 1px solid #e2e8f0;
        background-color: #f8fafc;
    }

    .project-name {
        display: flex;
        align-items: center;
        gap: 5px;
        color: #2d3748;
        font-size: 0.85rem;
        font-weight: 500;
    }

    .project-status {
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 500;
    }

    .project-status.actif {
        background-color: #d1f9d1;
        color: #237923;
    }

    .project-status.en.attente {
        background-color: #fef3c7;
        color: #92400e;
    }

    .project-status.terminé {
        background-color: #e2e8f0;
        color: #4a5568;
    }

    /* Roles Styles */
    .roles-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }

    .role-card {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        border: 1px solid #e2e8f0;
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        display: flex;
        flex-direction: column;
    }

    .role-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.05);
    }

    .role-header {
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #e2e8f0;
    }

    .role-header h3 {
        margin: 0;
        font-size: 1.1rem;
        color: #2d3748;
    }

    .role-actions {
        display: flex;
        gap: 5px;
    }

    .role-action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 5px;
        border: none;
        background: none;
        color: #a0aec0;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .role-action-btn:hover {
        background-color: #f7fafc;
        color: #4a5568;
    }

    .edit-role:hover {
        color: #3498db;
    }

    .delete-role:hover {
        color: #e53e3e;
    }

    .role-content {
        padding: 15px;
        flex: 1;
    }

    .role-content p {
        margin: 0;
        color: #4a5568;
        font-size: 0.9rem;
        line-height: 1.5;
    }

    .role-footer {
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top: 1px solid #e2e8f0;
        background-color: #f8fafc;
    }

    .role-date {
        color: #718096;
        font-size: 0.8rem;
    }

    /* Empty State Styles */
    .empty-state {
        text-align: center;
        padding: 40px 20px;
        background-color: #f8fafc;
        border-radius: 8px;
        border: 1px dashed #e2e8f0;
    }

    .empty-icon {
        margin-bottom: 20px;
        color: #a0aec0;
    }

    .empty-state h2 {
        margin: 0 0 10px 0;
        color: #2d3748;
        font-size: 1.5rem;
    }

    .empty-state p {
        margin: 0 0 25px 0;
        color: #718096;
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
        .tabs {
            overflow-x: auto;
        }

        .tab-btn {
            flex: 0 0 auto;
            white-space: nowrap;
        }

        .tab-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
        }

        .roles-container,
        .projects-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block extra_js %}
{{ super() }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Check if hash exists and activate the corresponding tab
        if(window.location.hash) {
            const hash = window.location.hash.substring(1);
            const tabToActivate = document.querySelector(`.tab-btn[data-tab="${hash}"]`);
            if(tabToActivate) {
                tabToActivate.click();
            }
        }

        // Tab switching functionality
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all tabs
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));

                // Add active class to clicked tab
                button.classList.add('active');
                document.getElementById(`${button.dataset.tab}-tab`).classList.add('active');

                // Store active tab in URL hash
                window.location.hash = button.dataset.tab;
            });
        });

        // Add event listeners for add/edit buttons
        const addMemberBtn = document.querySelectorAll('.add-member-btn');
        const addRoleBtn = document.querySelectorAll('.add-role-btn');
        const editBtns = document.querySelectorAll('.edit-btn');
        const deleteBtns = document.querySelectorAll('.delete-btn');
        const editRoleBtns = document.querySelectorAll('.edit-role');
        const deleteRoleBtns = document.querySelectorAll('.delete-role');
        const assignRoleBtns = document.querySelectorAll('.assign-role-btn');
        const createProjectBtn = document.querySelectorAll('.create-project-btn');

        // Add event listeners for member functions
        addMemberBtn.forEach(btn => {
            btn.addEventListener('click', () => {
                alert('Fonctionnalité en développement: Ajouter un membre');
            });
        });

        editBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const memberId = this.getAttribute('data-id');
                const modal = document.getElementById('edit-user-modal');
                if (modal) {
                    // Call the openUserModal function passing the user ID
                    openUserModal(memberId);
                    modal.classList.add('active');
                } else {
                    console.error('Edit user modal not found in the DOM');
                    alert('Modal not available. Unable to edit user.');
                }
            });
        });

        deleteBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const memberId = this.getAttribute('data-id');
                if (confirm('Êtes-vous sûr de vouloir supprimer ce membre?')) {
                    alert(`Fonctionnalité en développement: Supprimer le membre ${memberId}`);
                }
            });
        });

        // Add event listeners for role functions
        addRoleBtn.forEach(btn => {
            btn.addEventListener('click', () => {
                alert('Fonctionnalité en développement: Ajouter un rôle');
            });
        });

        editRoleBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const roleId = this.getAttribute('data-id');
                alert(`Fonctionnalité en développement: Modifier le rôle ${roleId}`);
            });
        });

        deleteRoleBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const roleId = this.getAttribute('data-id');
                if (confirm('Êtes-vous sûr de vouloir supprimer ce rôle?')) {
                    alert(`Fonctionnalité en développement: Supprimer le rôle ${roleId}`);
                }
            });
        });

        assignRoleBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const roleId = this.getAttribute('data-id');
                alert(`Fonctionnalité en développement: Assigner le rôle ${roleId}`);
            });
        });

        // Add event listener for create project button
        createProjectBtn.forEach(btn => {
            btn.addEventListener('click', () => {
                // Redirect to project creation page or trigger a modal
                if (document.getElementById('create-project-modal')) {
                    document.getElementById('create-project-modal').classList.add('active');
                } else {
                    window.location.href = "/workspace/projects/new";
                }
            });
        });
    });

    editBtns.forEach(btn => {
    btn.addEventListener('click', function() {
        const memberId = this.getAttribute('data-id');
        // Check if the modal exists and is included
        const modal = document.getElementById('edit-user-modal');
        if (modal) {
            // Call the openUserModal function passing the user ID
            openUserModal(memberId);
            modal.classList.add('active');
        } else {
            console.error('Edit user modal not found in the DOM');
            alert('Modal not available. Unable to edit user.');
        }
    });
});

</script>
{% endblock %}
{% include "workspace/modify_user_modal.html" %}